{% extends 'billing_app/base.html' %}
{% block title %}Purchase History{% endblock %}
{% block content %}
<h2>Purchase History</h2>

<form method="get" action="{% url 'bill_app:history' %}">
  <label>Filter by customer email:
    <input type="text" name="email" value="{{ email }}">
  </label>
  <button type="submit" class="btn btn-default">Filter</button>
  <a href="{% url 'bill_app:history' %}" class="btn btn-default">Show all</a>
</form>

<table style="margin-top:12px;">
  <thead>
    <tr><th>ID</th><th>Customer</th><th>Date</th><th>Total</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for p in purchases %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.customer_email }}</td>
      <td>{{ p.created_at }}</td>
      <td>â‚¹{{ p.total }}</td>
      <td><a href="{% url 'bill_app:purchase_detail' p.id %}">View</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="5">No purchases yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<p style="margin-top:12px;"><a href="{% url 'bill_app:billing_page' %}">Back to billing</a></p>
{% endblock %}
